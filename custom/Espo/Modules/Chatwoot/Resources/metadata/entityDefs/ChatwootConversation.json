{
    "fields": {
        "name": {
            "type": "varchar",
            "maxLength": 255,
            "readOnly": true
        },
        "chatwootConversationId": { "type": "int", "required": true },
        "contactInbox": { "type": "link" },
        "inbox": { "type": "link" },
        "chatwootContact": { "type": "link" },
        "contact": { "type": "link" },
        "chatwootAccount": { "type": "link", "required": true },
        "status": {
            "type": "enum",
            "options": ["open", "resolved", "pending", "snoozed"],
            "default": "open"
        },
        "chatwootInboxId": { "type": "int" },
        "inboxName": { "type": "varchar", "maxLength": 255 },
        "assigneeId": { "type": "int" },
        "assigneeName": { "type": "varchar", "maxLength": 255 },
        "lastActivityAt": { "type": "datetime" },
        "chatwootCreatedAt": { "type": "datetime" },
        "messagesCount": {
            "type": "int",
            "default": 0,
            "readOnly": true
        },
        "lastSyncedAt": { "type": "datetime", "readOnly": true },
        "lastMessageContent": {
            "type": "text",
            "readOnly": true,
            "tooltip": true
        },
        "contactAvatarUrl": {
            "type": "text",
            "readOnly": true,
            "tooltip": true
        },
        "contactDisplayName": {
            "type": "varchar",
            "maxLength": 255,
            "readOnly": true
        },
        "inboxChannelType": {
            "type": "varchar",
            "maxLength": 100,
            "readOnly": true
        },
        "teams": {
            "type": "linkMultiple",
            "view": "views/fields/teams"
        },
        "opportunities": {
            "type": "linkMultiple"
        }
    },
    "links": {
        "contactInbox": {
            "type": "belongsTo",
            "entity": "ChatwootContactInbox",
            "foreign": "conversations"
        },
        "chatwootContact": {
            "type": "belongsTo",
            "entity": "ChatwootContact",
            "foreign": "conversations"
        },
        "contact": {
            "type": "belongsTo",
            "entity": "Contact",
            "foreign": "chatwootConversations"
        },
        "chatwootAccount": {
            "type": "belongsTo",
            "entity": "ChatwootAccount"
        },
        "opportunities": {
            "type": "hasMany",
            "entity": "Opportunity",
            "foreign": "chatwootConversations",
            "relationName": "chatwootConversationOpportunity"
        },
        "inbox": {
            "type": "belongsTo",
            "entity": "ChatwootInbox",
            "foreign": "conversations"
        },
        "messages": {
            "type": "hasMany",
            "entity": "ChatwootMessage",
            "foreign": "conversation"
        },
        "teams": {
            "type": "hasMany",
            "entity": "Team",
            "relationName": "entityTeam",
            "layoutRelationshipsDisabled": true
        }
    },
    "indexes": {
        "uniqueConversation": {
            "unique": true,
            "columns": ["chatwootConversationId", "chatwootAccountId"]
        },
        "lastActivityAt": {
            "columns": ["lastActivityAt"]
        }
    },
    "collection": {
        "orderBy": "lastActivityAt",
        "order": "desc"
    }
}

